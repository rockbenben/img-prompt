(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{6506:function(e,t,a){Promise.resolve().then(a.bind(a,5835))},5835:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var l=a(7437),r=a(2265),n=a(3677),o=a(5462),s=a(9185),i=a(4847),c=a(8472),d=[],u=a(7307),m=e=>{let{objects:t=[],activeObject:a,onObjectClick:n}=e,o=(0,r.useCallback)(e=>{n(e)},[n]);return 0===t.length?null:(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,l.jsx)(u.ZP,{type:a===e?"primary":"default",onClick:()=>o(e),className:"transition-all duration-200",children:e},e))})},p=e=>{let{attributes:t=[],selectedAttribute:a,onAttributeClick:n}=e,o=(0,r.useCallback)(e=>{n(e)},[n]);return 0===t.length?null:(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,l.jsx)(u.ZP,{type:e===a?"primary":"default",onClick:()=>o(e),className:"transition-all duration-200",children:e},e))})};let g=e=>null==e?"":e.toLowerCase().replace(/[\s_-]+/g," "),{Text:h}=n.default,y=[{dark:"bg-gray-700",light:"bg-gray-600"},{dark:"bg-blue-900",light:"bg-blue-800"},{dark:"bg-green-900",light:"bg-green-800"},{dark:"bg-pink-900",light:"bg-pink-800"},{dark:"bg-cyan-900",light:"bg-cyan-800"},{dark:"bg-purple-900",light:"bg-purple-800"},{dark:"bg-yellow-900",light:"bg-yellow-800"},{dark:"bg-indigo-900",light:"bg-indigo-800"}];var b=e=>{let{tags:t=[],selectedTags:a,onTagClick:n}=e,o=(0,r.useCallback)(e=>{n(e)},[n]),s=(0,r.useMemo)(()=>{let e=[];for(let r=0;r<t.length;r+=10){let n=t.slice(r,r+10),s=Math.floor(r/10)%y.length,{dark:c,light:d}=y[s],u=(0,l.jsx)("div",{className:"flex flex-wrap",children:n.map(e=>{let t=a.some(t=>t.displayName===e.displayName),r=e.displayName.length>20?"".concat(e.displayName.slice(0,20),"..."):e.displayName,n=g(e.langName)!==g(e.displayName)?e.langName:"",s=(0,l.jsxs)("div",{className:"inline-block m-2 rounded cursor-pointer shadow transition-all duration-150 ease-in-out transform hover:scale-105 hover:shadow-lg ".concat(t?"opacity-50":""),onClick:()=>o(e),style:{transition:"background-color 0.3s"},children:[(0,l.jsx)(h,{className:"".concat(c," text-white px-2 py-1 rounded-l"),children:r}),(0,l.jsx)(h,{className:"".concat(d," text-white px-2 py-1 rounded-r"),children:n})]},"".concat(e.object,"-").concat(e.attribute,"-").concat(e.displayName));return e.description?(0,l.jsx)(i.Z,{title:e.description,placement:"top",children:s},"".concat(e.object,"-").concat(e.attribute,"-").concat(e.displayName)):s})},"row-".concat(r));e.push(u)}return e},[t,a,o]);return(0,l.jsx)(l.Fragment,{children:s})},f=a(8961),x=a(1015),j=a(5922);let{Text:k}=n.default;var w=e=>{let{selectedTags:t=[],onTagClick:a}=e,{theme:n}=(0,j.F)(),o=(0,r.useMemo)(()=>t.reduce((e,t)=>(e[t.object]||(e[t.object]={}),e[t.object][t.attribute]||(e[t.object][t.attribute]=[]),e[t.object][t.attribute].push(t),e),{}),[t]);return 0===t.length?null:(0,l.jsx)("div",{className:"p-3 rounded-lg ".concat("light"===n?"bg-gray-50":"bg-gray-800"),children:Object.entries(o).map(e=>{let[t,r]=e;return(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)(k,{strong:!0,className:"mb-2 text-gray-400",children:t}),Object.entries(r).map(e=>{let[r,n]=e;return(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)(k,{type:"secondary",className:"mr-2 text-gray-400",children:[r,":"]}),(0,l.jsx)(f.Z,{size:[8,8],wrap:!0,children:n.map(e=>{let t=e.displayName.length>20?"".concat(e.displayName.slice(0,20),"..."):e.displayName,r=g(e.langName)!==g(e.displayName)?e.langName:"";return(0,l.jsx)(x.Z,{color:"blue",onClick:()=>a(e),className:"flex items-center cursor-pointer hover:opacity-80 transition-opacity",style:{display:"inline-flex",alignItems:"center"},children:(0,l.jsxs)(f.Z,{size:4,align:"center",children:[(0,l.jsx)("span",{className:"font-medium",children:t}),(0,l.jsx)(k,{type:"secondary",className:"text-xs",children:r})]})},e.displayName)})})]},"".concat(t,"-").concat(r))})]},t)})})},N=a(8355),v=a(9920),C=a(868),Z=a(3669),S=a(8706),T=a(4574);let E=[{text:"Natural Lighting, Studio lighting, Cinematic Lighting, Crepuscular Rays, X-Ray, Backlight",type:"primary",tooltipKey:"tooltip-light",promptKey:"prompt-light"},{text:"insanely detailed and intricate, masterpiece, high_contrast, best quality, best aesthetic, stunning, Gorgeous, Surrealistic, Elegant, luxurious, subtle, delicate, captivating, in a symbolic and meaningful style, 8K",type:"primary",tooltipKey:"tooltip-polish",promptKey:"prompt-polish"}],P=["white","black","darkgray","gray","lightslategray","slategray","darkslategray","lightgray","gainsboro","whitesmoke","snow","ghostwhite","floralwhite","linen","antiquewhite","oldlace","ivory","seashell","mintcream","honeydew","azure","aliceblue","lavender","lightsteelblue","slateblue","mediumslateblue","lightblue","powderblue","skyblue","cornflowerblue","royalblue","mediumblue","blue","darkblue","navy","midnightblue","teal","darkcyan","cadetblue","mediumturquoise","darkturquoise","turquoise","paleturquoise","aquamarine","lightcyan","cyan","dodgerblue","darkgreen","green","forestgreen","seagreen","mediumseagreen","mediumaquamarine","darkseagreen","lightseagreen","springgreen","mediumspringgreen","lightgreen","palegreen","lime","limegreen","lawngreen","chartreuse","greenyellow","yellowgreen","darkolivegreen","olivedrab","olive","darkkhaki","khaki","palegoldenrod","lightyellow","lightgoldenrodyellow","lemonchiffon","beige","cornsilk","wheat","burlywood","gold","yellow","darkorange","orange","sandybrown","peachpuff","papayawhip","blanchedalmond","bisque","moccasin","navajowhite","peru","darkgoldenrod","goldenrod","chocolate","saddlebrown","sienna","rosybrown","darksalmon","salmon","lightsalmon","indianred","firebrick","brown","maroon","darkred","red","orangered","tomato","crimson","coral","lightpink","pink","hotpink","deeppink","palevioletred","mediumvioletred","lavenderblush","lightcoral","plum","mediumorchid","violet","magenta","fuchsia","darkmagenta","purple","darkorchid","darkviolet","blueviolet","mediumpurple","indigo","light_brown","dark_pink","blonde","silver","mistyrose","steelblue","thistle","darkslateblue","Iridescent","Chromatic"],z=async(e,t,a)=>{let l={en:"en",zh:"zh-CHS","zh-cn":"zh-CHS","zh-tw":"zh-CHT",ja:"ja",ko:"ko",fr:"fr",es:"es",de:"de",ru:"ru",ar:"ar",pt:"pt",id:"id",tr:"tr",vi:"vi"},r=l[t]||"auto",n=l[a]||"zh-CHS",o="https://aidemo.youdao.com/trans?q=".concat(encodeURIComponent(e),"&from=").concat(r,"&to=").concat(n);try{let e=await fetch(o);if(!e.ok)throw Error("Youdao API failed");let t=await e.json();if(t.errorCode&&"0"!==t.errorCode)throw Error("Youdao API error: ".concat(t.errorCode));if(t.translation&&t.translation.length>0)return t.translation[0].trim();throw Error("No translation result")}catch(e){throw e}},M=async(e,t,a)=>{let l={en:"en",zh:"zh-CN","zh-cn":"zh-CN","zh-tw":"zh-TW",ja:"ja",ko:"ko",fr:"fr",es:"es",de:"de",ru:"ru",ar:"ar",pt:"pt",it:"it",nl:"nl",pl:"pl",tr:"tr",id:"id",vi:"vi"},r=l[t]||t,n=l[a]||a;"auto"!==r&&l[t]||(r=/[\u4e00-\u9fff]/.test(e)?"zh-CN":/[ぁ-ゖゝ-ゟァ-ヴー々〆〤]/.test(e)?"ja":/[가-힣]/.test(e)?"ko":"en");let o="https://api.mymemory.translated.net/get?q=".concat(encodeURIComponent(e),"&langpair=").concat(r,"|").concat(n);try{let e=await fetch(o);if(!e.ok)throw Error("MyMemory API failed");let t=await e.json();if(t.responseData&&t.responseData.translatedText)return t.responseData.translatedText;throw Error("No translation result")}catch(e){throw e}},q=async(e,t,a)=>{let l="https://translate.googleapis.com/translate_a/single?client=gtx&sl=".concat(t,"&tl=").concat(a,"&dt=t&q=").concat(encodeURIComponent(e));try{let e=await fetch(l);if(!e.ok)throw Error("Google API failed");return(await e.json())[0].map(e=>e[0]).join("")}catch(e){throw e}},_=async(e,t,a)=>{let l=e.trim();if(!RegExp("[a-zA-Z\\p{L}]","u").test(l))return l;let r=null;for(let e of[{name:"Google",fn:q},{name:"Youdao",fn:z},{name:"MyMemory",fn:M}])try{console.log("尝试使用 ".concat(e.name," 翻译服务..."));let r=await e.fn(l,t,a);return console.log("".concat(e.name," 翻译成功")),r}catch(t){console.warn("".concat(e.name," 翻译失败:"),t),r=t;continue}throw Error("所有翻译服务都不可用。最后错误: ".concat(null==r?void 0:r.message))},A=()=>{let e=(0,S.T_)("CopyToClipboard");return{copyToClipboard:async(t,a,l)=>{var r;if(!t||""===t.trim()){let t=l?"".concat(l).concat(e("empty")):e("empty");null==a||a.warning(t);return}if(!(null===(r=navigator)||void 0===r?void 0:r.clipboard)){null==a||a.error(e("unsupported"));return}try{await navigator.clipboard.writeText(t);let r=l?"".concat(l).concat(e("success")):e("success");null==a||a.success(r)}catch(r){console.error("Copy to clipboard failed: ",r);let t=l?"".concat(l).concat(e("failure")):e("failure");null==a||a.error(t)}}}},{Paragraph:R,Text:I}=n.default,O=()=>P[Math.floor(Math.random()*P.length)];var F=e=>{let{selectedTags:t=[],setSelectedTags:a,tagsData:n}=e,[o,s]=N.ZP.useMessage(),{copyToClipboard:c}=A(),d=(0,S.T_)("ResultSection"),m=(0,T.bU)(),[p,h]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[k,w]=(0,r.useState)(!1),[z,M]=(0,r.useState)([]),[q,F]=(0,r.useState)(null),[D,K]=(0,r.useState)(""),[W,B]=(0,r.useState)(!1),{theme:G}=(0,j.F)(),H=(0,r.useCallback)(async e=>{if(!e.trim()){b("");return}if("en"===m){b(e);return}try{w(!0);let t=await _(e,"en",m);b(t)}catch(e){console.warn("自动翻译失败:",e),b("")}finally{w(!1)}},[m]);(0,r.useEffect)(()=>{let e=setTimeout(()=>{H(p)},500);return()=>clearTimeout(e)},[p,H]);let L=(0,r.useMemo)(()=>{let e=new Map(n.map(e=>[g(e.displayName||""),e]));return t=>{let a=g(t),l=e.get(a);if(!l){let t=a.replace(/ /g,"_");l=e.get(t)}return l||{object:void 0,attribute:void 0,langName:void 0,displayName:void 0}}},[n]),U=(0,r.useCallback)(e=>{let t=e.target.value;if(t.endsWith(",")||t.endsWith("，")){h(t=t.slice(0,-1).replace(/,\s*$/g,"")+", ");return}h(t),a(t.split(", ").filter(e=>null==e?void 0:e.trim()).map(e=>({...L(e),displayName:e})))},[L,a]),Y=(0,r.useCallback)(()=>{let e=Array.from(new Set(p.replace(/，/g,", ").replace(/\s+,\s*/g,", ").replace(/\s+/g," ").split(", ").filter(e=>""!==e.trim()).map(e=>g(e)))).map(e=>{let{object:t,attribute:a,langName:l,displayName:r}=L(e);return{object:t,displayName:r||e,attribute:a,langName:l}});a(e),h(e.map(e=>e.displayName).join(", ")),B(!1)},[p,L,a]),X=e=>{let l=[...t];l.length>0?l[l.length-1]=e:l.push(e),a(l),h(l.map(e=>e.displayName).join(", "))};(0,r.useEffect)(()=>{!W&&t.length>0?h(t.map(e=>e.displayName).filter(Boolean).join(", ")):0===t.length&&h("")},[t,W]),(0,r.useEffect)(()=>{var e;let t=g((null===(e=p.split(", ").pop())||void 0===e?void 0:e.trim())||"");if(!t){M([]),F(null);return}q&&F(null);let a=e=>n.filter(a=>{let l=g(a[e]||"");return l===t?(F(a),!1):l.includes(t)}).sort((a,l)=>{let r=g(a[e]||""),n=g(l[e]||""),o=r.startsWith(t);return o!==n.startsWith(t)?o?-1:1:r.localeCompare(n)}),l=a("displayName");0===l.length&&(l=a("langName")),M(l.slice(0,10))},[p,n]);let $=(0,r.useCallback)((e,t)=>{let l=Array.from(new Set((p?p+", "+e:e).split(", ").filter(Boolean)));a(l.map(e=>{let{object:t,attribute:a,langName:l,displayName:r}=L(e);return{object:t,displayName:r||e,attribute:a,langName:l}})),h(l.join(", ")),o.success(d(t))},[p,L,a,d,o]),J=(0,r.useCallback)(()=>{a([]),h(""),o.open({type:"success",content:d("clearSuccess")})},[a,d,o]),Q=async()=>{try{let e=await _(D,"auto","en");e.trim()?($(e,"translateSuccess"),K("")):o.open({type:"error",content:d("translateEmptyError")})}catch(e){o.open({type:"error",content:d("translateFailError")})}};return(0,l.jsxs)(l.Fragment,{children:[s,(0,l.jsxs)(f.Z,{wrap:!0,children:[E.map(e=>{let{text:t,type:a,tooltipKey:r,promptKey:n}=e;return(0,l.jsx)(i.Z,{title:d(r),children:(0,l.jsx)(u.ZP,{type:a,onClick:()=>$(t,"insertSuccess"),children:d(n)})},r)}),(0,l.jsx)(i.Z,{title:d("tooltip-negative"),children:(0,l.jsx)(u.ZP,{type:"dashed",onClick:()=>c("(normal aesthetic,bad aesthetic,worst quality,low quality,medium quality,illustration,3d,2d,painting,cartoons,sketch:1.4),(blurry:1.4),(depth of field,bokeh,blurred foreground),ugly,bad anatomy,poorly drawn face,poorly drawn hands,deformed,mutation,mutated hands,malformed limbs,extra fingers,extra arms,extra legs,extra limbs,missing fingers,fused fingers,missing arms,missing legs,bad proportions,extra digit,extra foot,bad body,bad feet,duplicate,long neck,tilted head,cross-eyed,looking away,facing away,gross proportions,fewer digits,morbid,mutilated,skin blemishes,skin spots,acnes,(fat:1.2),dehydrated,monochrome,grayscale,polar lowres,lowres,jpeg artifacts,cropped,teethcropped,text,error,signature,watermark,username,out of frame",o,d("prompt-negative")),children:d("prompt-negative")})}),(0,l.jsx)(u.ZP,{onClick:()=>c(p,o,d("prompt")),children:d("button-copy")}),(0,l.jsx)(u.ZP,{danger:!0,onClick:J,children:d("button-clear")})]}),(0,l.jsx)(v.Z.TextArea,{value:p,count:{show:!0,max:380},onChange:U,onBlur:Y,onCompositionStart:()=>B(!0),onCompositionEnd:()=>B(!1),rows:10,className:"w-full mt-2 mb-5 ".concat("light"===G?"bg-gray-50 text-gray-600":"bg-gray-800 text-gray-300")}),(0,l.jsxs)(C.Z,{gap:"4px 0",wrap:!0,children:[q&&(0,l.jsxs)(x.Z,{icon:(0,l.jsx)(Z.Z,{}),color:"success",className:"cursor-pointer",onClick:()=>X(q),children:[(0,l.jsx)(I,{ellipsis:{tooltip:q.displayName},className:"max-w-[200px] truncate",children:q.displayName}),(0,l.jsxs)(I,{type:"secondary",className:"ml-1",children:[q.langName," "]})]}),z.map((e,t)=>{let a=g(e.langName)!==g(e.displayName)?e.langName:"";return(0,l.jsxs)(x.Z,{color:"processing",className:"cursor-pointer",onClick:()=>X(e),children:[(0,l.jsx)(I,{ellipsis:{tooltip:e.displayName},className:"max-w-[200px] truncate",children:e.displayName}),(0,l.jsx)(I,{type:"secondary",className:"ml-1",children:a})]},t)})]}),(0,l.jsx)(i.Z,{title:d("tooltip-translate"),children:(0,l.jsxs)(f.Z.Compact,{className:"w-full mt-2",children:[(0,l.jsx)(v.Z,{value:D,onChange:e=>K(e.target.value),onPressEnter:Q,placeholder:d("tooltip-translate")}),(0,l.jsx)(u.ZP,{type:"primary",onClick:Q,children:d("button-translate")})]})}),(0,l.jsx)(R,{type:"secondary",className:"mt-2",children:d("title-other")}),(0,l.jsx)(i.Z,{title:d("tooltip-randomColor"),children:(0,l.jsx)(u.ZP,{onClick:()=>{let e=p,t=RegExp("\\b(".concat(P.join("|"),")\\b"),"gi"),a=e.match(t);a&&a.length>0?(h(e=e.replace(t,e=>{let t=O();return console.log("Replacing ".concat(e," with ").concat(t)),t})),o.open({type:"success",content:"Successfully replaced ".concat(a.length," color matches.")})):o.open({type:"info",content:"No color matches found to replace."})},children:d("button-randomcolor")})}),"en"!==m&&y&&(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(v.Z.TextArea,{value:y,readOnly:!0,rows:4,className:"w-full ".concat("light"===G?"bg-blue-50 text-blue-600 border-blue-200":"bg-blue-900/20 text-blue-300 border-blue-700")})})]})};let{Title:D}=n.default,K=e=>Array.from(new Set(e.map(e=>e.object))),W=(e,t)=>Array.from(new Set(t.filter(t=>t.object===e).map(e=>e.attribute)));var B=()=>{let e=(0,r.useContext)(c.R),t=(0,S.T_)("ToolPage"),a=(0,r.useMemo)(()=>[...e,...d],[e]),n=(0,r.useMemo)(()=>K(a),[a]),[u,g]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[f,x]=(0,r.useState)([]),j=(0,r.useMemo)(()=>W(u,a),[u,a]);(0,r.useEffect)(()=>{n.length>0&&!u&&g(n[0])},[n,u]),(0,r.useEffect)(()=>{j.length>0&&y(j[0])},[j]);let k=(0,r.useCallback)(e=>{g(e)},[]),N=(0,r.useCallback)(e=>{y(e)},[]),v=(0,r.useCallback)(e=>{x(t=>t.some(t=>t.displayName===e.displayName)?t.filter(t=>t.displayName!==e.displayName):[...t,e])},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D,{level:2,className:"flex justify-center items-center",children:"IMGPrompt"}),(0,l.jsxs)(o.Z,{gutter:[16,16],children:[(0,l.jsxs)(s.Z,{xs:24,lg:18,children:[(0,l.jsx)(D,{level:5,className:"m-2",children:(0,l.jsxs)(i.Z,{title:t("hierarchyTip"),children:["1️⃣",t("section1")]})}),(0,l.jsx)(m,{objects:n,activeObject:u,onObjectClick:k}),(0,l.jsx)(D,{level:5,className:"m-2",children:(0,l.jsxs)(i.Z,{title:t("hierarchyTip"),children:["2️⃣",t("section2")]})}),(0,l.jsx)(p,{attributes:j,selectedAttribute:h,onAttributeClick:N}),(0,l.jsx)(D,{level:5,className:"m-2",children:(0,l.jsxs)(i.Z,{title:t("hierarchyTip"),children:["3️⃣",t("section3")]})}),(0,l.jsx)(b,{tags:a.filter(e=>e.object===u&&e.attribute===h),selectedTags:f,onTagClick:v}),(0,l.jsxs)(D,{level:5,className:"m-2",children:["▣ ",t("currentSelection")]}),(0,l.jsx)(w,{selectedTags:f,onTagClick:v})]}),(0,l.jsx)(s.Z,{xs:24,lg:6,children:(0,l.jsx)(F,{selectedTags:f,setSelectedTags:x,tagsData:a})})]})]})}},8472:function(e,t,a){"use strict";a.d(t,{DataProvider:function(){return n},R:function(){return r}});var l=a(7437);let r=(0,a(2265).createContext)([]);function n(e){let{children:t,data:a}=e;return(0,l.jsx)(r.Provider,{value:a,children:t})}}},function(e){e.O(0,[492,574,550,971,117,744],function(){return e(e.s=6506)}),_N_E=e.O()}]);